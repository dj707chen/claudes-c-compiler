QEMU Build Support Status
=========================

Summary: QEMU 10.2.50 can be compiled (1700+ C files) using ccc-x86, but has
runtime issues. The compound literal array bug that caused CPU double-registration
has been fixed. Remaining issue is QOM (QEMU Object Model) type system failures.

Build Status:
- Configure: PASS
- Compilation: PASS (with one file workaround - qapi-introspect.c routes to gcc)
- Linking: PASS (after response file support was added)
- Runtime: PARTIAL - "--version" works, but type system errors on CPU listing

Build Steps:
  1. Use wrapper script that routes qapi-introspect.c to gcc
  2. Configure: CC=/tmp/ccc_wrapper.sh CXX=g++ ./configure --target-list=x86_64-softmmu
  3. Build: ninja -C build qemu-system-x86_64

Known Issues Fixed:
  1. __has_attribute macro aliasing (cleanup attribute) - FIXED
  2. Bitfield ICE in global_init_compound_struct - FIXED
  3. Response file (@file) support - FIXED
  4. Compound literal array init (CPU double-registration) - FIXED

Remaining Issues:
  1. qapi-introspect.c parse failure via ninja (works fine manually, possibly
     a state/concurrency issue in the preprocessor) - WORKAROUND: gcc wrapper
  2. QOM type system runtime failure:
     "VMSTATE_IF_CLASS: Object 0x... is not an instance of type vmstate-if"
     This is likely a codegen bug affecting:
     - QOM type info struct initialization (TypeInfo structs use function pointers
       and class_size/instance_size fields)
     - The class checker macros (DECLARE_CLASS_CHECKERS) which use
       object_class_dynamic_cast_assert
     - Possibly related to struct member offsets or function pointer storage

     Investigation needed: Compare QOM TypeInfo struct layout and TypeImpl
     struct layout between gcc and ccc builds. Focus on:
     - object.c: type_new(), type_initialize(), object_class_dynamic_cast_assert()
     - The INTERFACE_CLASS_CHECK / DECLARE_CLASS_CHECKERS macro expansion
     - Whether all the TypeInfo compound literals used in type_register_static()
       are correctly initialized (these use compound struct literals extensively)

Priority: Medium - QEMU can be built from gcc for testing while kernel compilation
is the primary focus.
