Lowerer Decomposition Plan
===========================

Goal: Break up the ~30-field Lowerer god struct into focused sub-structs.

COMPLETED:
- Commit 1: Consolidate FunctionMeta parallel HashMaps into FuncSig struct
  (10 parallel HashMaps replaced with HashMap<String, FuncSig> + ptr_sigs)
- Commit 2: Extract FunctionBuildState from Lowerer
  (17 per-function fields moved into FunctionBuildState sub-struct,
   Lowerer holds Option<FunctionBuildState> â€” None between functions,
   ~150 access sites updated, func()/func_mut() accessors added)
- Commit 3: Extract TypeContext from Lowerer
  (6 type-system fields moved into TypeContext sub-struct:
   struct_layouts, typedefs, function_typedefs, enum_constants,
   ctype_cache, func_return_ctypes. Lowerer holds TypeContext field.
   ~67 access sites updated across 13 files. pop_scope and
   insert_enum_scoped updated to go through self.types.)

REMAINING (in order):

1. Move scope undo tracking into TypeContext
   - ScopeFrame currently tracks undo ops for maps in both TypeContext and
     FunctionBuildState. Split accordingly.
   - Risk: Medium (scope push/pop is subtle)

4. CType::Struct(Arc<StructType>) -> CType::Struct(String)
   - TypeContext becomes sole owner of struct definitions
   - Eliminates forward-declaration staleness bugs
   - Risk: Medium-high (large blast radius but conceptually simple)

5. Typedefs become HashMap<String, CType>
   - Delete TypeSpecifier conversion layer
   - Risk: Medium

6-8. Sema populates TypeContext / Lowerer receives it from sema
   - Make sema the authority for type information
   - Risk: Medium-high
