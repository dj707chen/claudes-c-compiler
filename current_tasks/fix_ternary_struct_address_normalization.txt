Task: Fix ternary struct address normalization bug
Status: in_progress
Started: 2026-01-30

Problem:
In ternary expressions like `p ? *p : (val_t){0, 0}` where val_t is a struct,
both branches produce addresses (pointers to struct data). However, the
is_struct_compound_literal() check detects only the compound literal branch,
causing needs_struct_load to be true. This leads to:
- The compound literal branch correctly loading packed data from its alloca
- The *p branch incorrectly casting its address to an integer (losing the pointer)

The rep movsb then tries to copy from address 0 (the cast pointer value),
causing a segfault.

Fix: Change the normalization logic to detect when both branches actually
produce addresses (for struct-typed expressions). Only normalize when there's
a true mismatch between packed data and addresses.

Affects: Gravity project (fails on all 4 architectures)
